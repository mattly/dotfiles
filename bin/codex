#! /usr/bin/env bash

extfile=~/.config/vscode/extensions

case $1 in
    save)
        mkdir -p ~/.config/vscode
        code --list-extensions > $extfile
        ;;
    unsaved)
        code --list-extensions | comm -23 - $extfileq
        ;;
    append)
        for package in $(code --list-extensions | comm -23 - $extfile); do
            echo $package
            echo $package >> $extfile
        done
        sort --ignore-case --output=$extfile $extfile
        ;;
    load)
        # to install
        for package in $(code --list-extensions | comm -23 $extfile -); do
            code --install-extension $package
        done
        # to remove
        for package in $(code --list-extensions | comm -13 $extfile -); do
            code --uninstall-extension $package
        done
        ;;
    *) echo "unknown action." ;;
esac

